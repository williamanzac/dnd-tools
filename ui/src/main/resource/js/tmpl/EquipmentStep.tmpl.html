<div class="card mb-3" data-bind="css: {'border-primary': !complete()}">
	<div class="card-header" data-bind="click: toggleStartingExpanded">
		<div class="d-flex">
			<div class="mr-auto p-2" data-bind="text: i18n().get('startingequipment.name')"></div>
			<button class="p-2 btn btn-link"
				data-bind="visible: !startingExpanded()">
				<i class="fa fa-angle-down"></i>
			</button>
			<button class="p-2 btn btn-link"
				data-bind="visible: startingExpanded">
				<i class="fa fa-angle-up"></i>
			</button>
		</div>
	</div>
	<div class="card-body collapse" data-bind="css: { show: startingExpanded}">
		<ul class="nav nav-tabs" data-bind="foreach: modes">
			<li class="nav-item">
				<a class="nav-link" href="#" data-bind="text: $parent.i18n().get('mode.' + $data + '.name'), css: {active: $data == $parent.currentMode()}, click: $parent.selectMode"></a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane" data-bind="css: {active: modeSelected('StartingEquipment')}">
				<div class="card mt-3" data-bind="css: {'border-primary': !model().characterClass().startingEquipment.complete()}, if: model().characterClass()">
					<div class="card-header" data-bind="text: i18n().get(model().characterClass().name + '.name') + ' ' + i18n().get('startingequipment.name')">
					</div>
					<div class="card-body">
						<p data-bind="text: i18n().getForClass('startingequipment.description')"></p>
						<!-- ko foreach: model().characterClass().startingEquipment.options -->
						<!-- ko if: numberOfChoices == 0 -->
						<div class="card" data-bind="css: {'mt-3': $index() > 0}">
							<div class="card-body">
								<span data-bind="text: $parent.i18n().getForClass('startingequipment.' + name + '.description')"></span>
							</div>
						</div>
						<!-- /ko -->
						<!-- ko if: numberOfChoices > 0 && items.length > 0 -->
						<div class="card" data-bind="css: {'mt-3': $index() > 0, 'border-primary': !$data.complete()}">
							<div class="card-body">
								<span data-bind="text: $parent.i18n().getForClass('startingequipment.' + name + '.description')"></span>
								<select class="form-control">
									<option hidden>Select...</option>
									<!-- ko foreach: items -->
									<option data-bind="click: $parents[1].selectItem.bind($data, $data, $parent), attr: {selected: $parents[1].itemSelected($data, $parent)}, text: $parents[1].i18n().get('item.' + name + '.name')"></option>
									<!-- /ko -->
								</select>
							</div>
						</div>
						<!-- /ko -->
						<!-- ko if: numberOfChoices > 0 && options.length > 0 -->
						<div class="card" data-bind="css: {'mt-3': $index() > 0}">
							<ul class="list-group list-group-flush" data-bind="foreach: options">
								<li class="list-group-item list-group-item-action" data-bind="css: {'list-group-item-light': $parents[1].optionDisabled($data, $parent), 'list-group-item-primary': $parents[1].optionSelected($data, $parent)}, click: $parents[1].toggleOption.bind($data, $data, $parent)">
									<span data-bind="text: $parents[1].i18n().getForClass('startingequipment.' + name + '.description')"></span>
									<!-- ko if: numberOfChoices > 0 && items.length > 0 -->
									<select class="form-control" data-bind="click: function() {}, clickBubble: false, disable: !$parents[1].optionSelected($data, $parent)">
										<option hidden>Select...</option>
										<!-- ko foreach: items -->
										<option data-bind="click: $parents[2].selectItem.bind($data, $data, $parent), attr: {selected: $parents[2].itemSelected($data, $parent)}, text: $parents[2].i18n().get('item.' + name + '.name')"></option>
										<!-- /ko -->
									</select>
									<!-- /ko -->
								</li>
							</ul>
						</div>
						<!-- /ko -->
						<!-- /ko -->
					</div>
				</div>
				<div class="card mt-3" data-bind="css: {'border-primary': !model().background().startingEquipment.complete()}, if: model().background()">
					<div class="card-header" data-bind="text: i18n().get(model().background().name + '.name') + ' ' + i18n().get('startingequipment.name')">
					</div>
					<div class="card-body">
						<p data-bind="text: i18n().getForBackground('startingequipment.description')"></p>
						<!-- ko foreach: model().background().startingEquipment.options -->
						<!-- ko if: numberOfChoices == 0 -->
						<div class="card" data-bind="css: {'mt-3': $index() > 0}">
							<div class="card-body">
								<span data-bind="text: $parent.i18n().getForBackground('startingequipment.' + name + '.description')"></span>
							</div>
						</div>
						<!-- /ko -->
						<!-- ko if: numberOfChoices > 0 && items.length > 0 -->
						<div class="card" data-bind="css: {'mt-3': $index() > 0}">
							<div class="card-body">
								<span data-bind="text: $parent.i18n().getForBackground('startingequipment.' + name + '.description')"></span>
								<select class="form-control">
									<option hidden>Select...</option>
									<!-- ko foreach: items -->
									<option data-bind="click: $parents[1].selectItem.bind($data, $data, $parent), attr: {selected: $parents[1].itemSelected($data, $parent)}, text: $parents[1].i18n().get('item.' + name + '.name')"></option>
									<!-- /ko -->
								</select>
							</div>
						</div>
						<!-- /ko -->
						<!-- ko if: numberOfChoices > 0 && options.length > 0 -->
						<div class="card" data-bind="css: {'mt-3': $index() > 0}">
							<ul class="list-group list-group-flush" data-bind="foreach: options">
								<li class="list-group-item list-group-item-action" data-bind="css: {'list-group-item-light': $parents[1].optionDisabled($data, $parent), 'list-group-item-primary': $parents[1].optionSelected($data, $parent)}, click: $parents[1].toggleOption.bind($data, $data, $parent)">
									<span data-bind="text: $parents[1].i18n().getForBackground('startingequipment.' + name + '.description')"></span>
									<!-- ko if: numberOfChoices > 0 && items.length > 0 -->
									<select class="form-control" data-bind="click: function() {}, clickBubble: false, disable: !$parents[1].optionSelected($data, $parent)">
										<option hidden>Select...</option>
										<!-- ko foreach: items -->
										<option data-bind="click: $parents[2].selectItem.bind($data, $data, $parent), attr: {selected: $parents[2].itemSelected($data, $parent)}, text: $parents[2].i18n().get('item.' + name + '.name')"></option>
										<!-- /ko -->
									</select>
									<!-- /ko -->
								</li>
							</ul>
						</div>
						<!-- /ko -->
						<!-- /ko -->
					</div>
				</div>
			</div>
			<div class="tab-pane" data-bind="css: {active: modeSelected('Gold')}">
				<form>
					<div class="form-group row">
						<label for="startingWealth" class="col-sm-4 col-form-label" data-bind="text: i18n().get('startingwealth.name')"></label>
						<div class="col-sm-8">
							<div class="input-group">
								<input type="number" id="startingWealth" class="form-control" min='0' data-bind="value: startingWealth" />
								<div class="input-group-append">
									<span class="input-group-text">gp</span>
									<button class="btn btn-outline-secondary" type="button" data-bind="click: generateStartingWealth">Generate</button>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<div class="card mb-3">
	<div class="card-header" data-bind="click: toggleMoneyExpanded">
		<div class="d-flex">
			<div class="mr-auto p-2" data-bind="text: i18n().get('money.name')"></div>
			<button class="p-2 btn btn-link"
				data-bind="visible: !moneyExpanded()">
				<i class="fa fa-angle-down"></i>
			</button>
			<button class="p-2 btn btn-link"
				data-bind="visible: moneyExpanded">
				<i class="fa fa-angle-up"></i>
			</button>
		</div>
	</div>
	<div class="card-body collapse pt-0 pb-0" data-bind="css: { show: moneyExpanded}">
		<form>
			<div class="form-group row">
				<label class="col-sm-3 col-form-label">Platinum</label>
				<div class="col-sm-9">
					<input type="text" readonly class="form-control-plaintext" data-bind="value: model().money().platinum" />
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-3 col-form-label">Gold</label>
				<div class="col-sm-9">
					<input type="text" readonly class="form-control-plaintext" data-bind="value: model().money().gold" />
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-3 col-form-label">Electrum</label>
				<div class="col-sm-9">
					<input type="text" readonly class="form-control-plaintext" data-bind="value: model().money().electrum" />
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-3 col-form-label">Silver</label>
				<div class="col-sm-9">
					<input type="text" readonly class="form-control-plaintext" data-bind="value: model().money().silver" />
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-3 col-form-label">Copper</label>
				<div class="col-sm-9">
					<input type="text" readonly class="form-control-plaintext" data-bind="value: model().money().copper" />
				</div>
			</div>
		</form>
	</div>
</div>
<div class="card mb-3">
	<div class="card-header" data-bind="click: toggleEquipmentExpanded">
		<div class="d-flex">
			<div class="mr-auto p-2" data-bind="text: i18n().get('equipment.name')"></div>
			<button class="p-2 btn btn-link"
				data-bind="visible: !equipmentExpanded()">
				<i class="fa fa-angle-down"></i>
			</button>
			<button class="p-2 btn btn-link"
				data-bind="visible: equipmentExpanded">
				<i class="fa fa-angle-up"></i>
			</button>
		</div>
	</div>
	<div class="card-body collapse p-0" data-bind="css: { show: equipmentExpanded}">
		<ul class="list-group list-group-flush" data-bind="template: {name: 'EquipmentItem', foreach: model().equipment().items}">
		</ul>
	</div>
</div>
<div class="card">
	<div class="card-header" data-bind="click: toggleAddEquipmentExpanded">
		<div class="d-flex">
			<div class="mr-auto p-2" data-bind="text: i18n().get('addequipment.name')"></div>
			<button class="p-2 btn btn-link"
				data-bind="visible: !addEquipmentExpanded()">
				<i class="fa fa-angle-down"></i>
			</button>
			<button class="p-2 btn btn-link"
				data-bind="visible: addEquipmentExpanded">
				<i class="fa fa-angle-up"></i>
			</button>
		</div>
	</div>
	<div class="card-body collapse p-0" data-bind="css: { show: addEquipmentExpanded}">
		<ul class="nav nav-tabs" data-bind="foreach: addItemModes">
			<li class="nav-item">
				<a class="nav-link" href="#" data-bind="text: $parent.i18n().get('mode.' + $data + '.name'), css: {active: $parent.addItemModeSelected($data)}, click: $parent.selectAddItemMode"></a>
			</li>
		</ul>
		<div class="tab-content" id="abilityScores">
			<div class="tab-pane active table-responsive">
				<ul class="list-group list-group-flush">
					<!-- ko if: addItemModeSelected("Gear") -->
					<!-- ko template: {name:'Item', foreach: gear} -->
					<!-- /ko -->
					<!-- /ko -->
					<!-- ko if: addItemModeSelected("Armour") -->
					<!-- ko template: {name:'Item', foreach: armour} -->
					<!-- /ko -->
					<!-- /ko -->
					<!-- ko if: addItemModeSelected("Weapons") -->
					<!-- ko template: {name:'Item', foreach: weapons} -->
					<!-- /ko -->
					<!-- /ko -->
					<!-- ko if: addItemModeSelected("Packs") -->
					<!-- ko template: {name:'Item', foreach: packs} -->
					<!-- /ko -->
					<!-- /ko -->
				</ul>
			</div>
		</div>
	</div>
</div>
